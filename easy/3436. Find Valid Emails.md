# 3436. Find Valid Emails

**Data:** 13/01/2026  
**Dificuldade:** Easy  
**Tópicos:** SQL, String Functions, Data Validation  
**Link:** https://leetcode.com/problems/find-valid-emails/description/

## Descrição
Escreva uma solução para encontrar todos os **emails válidos** na tabela `Users`.

Um email é considerado válido se seguir estas regras:
- Deve conter **exatamente um `@`**
- Deve terminar com `.com`
- Formato geral: `local_part@domain.com`
- A parte antes do `@` (`local_part`) pode conter apenas:
  - letras minúsculas (`a-z`)
  - números (`0-9`)
  - underscore (`_`)
- A parte entre `@` e `.com` (`domain`) deve conter apenas:
  - letras minúsculas (`a-z`)
- O `domain` não pode ser vazio

---

## Solução (SQL Server)

```sql
SELECT 
    usr.user_id, 
    usr.email
FROM Users usr
WHERE 
    -- Deve conter @ e terminar com .com
    usr.email LIKE '%@%[a-z].com'
    
    -- Não pode ter mais de um @
    AND usr.email NOT LIKE '%@%@%'
    
    -- Validação do local_part (antes do @): apenas [a-z0-9_]
    AND LEFT(
            usr.email, 
            CHARINDEX('@', usr.email) - 1
        ) NOT LIKE '%[^a-z0-9_]%'
    
    -- Validação do domain (entre @ e .com): apenas [a-z]
    AND SUBSTRING(
            usr.email,
            CHARINDEX('@', usr.email) + 1,
            LEN(usr.email) - CHARINDEX('@', usr.email) - 4
        ) NOT LIKE '%[^a-z]%'
    
    -- O domain não pode ser vazio
    AND LEN(
        SUBSTRING(
            usr.email,
            CHARINDEX('@', usr.email) + 1,
            LEN(usr.email) - CHARINDEX('@', usr.email) - 4
        )
    ) > 0
ORDER BY 
    usr.user_id;
